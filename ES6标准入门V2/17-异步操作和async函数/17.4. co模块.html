<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>17.4. co模块</title>
</head>

<body>

  <script>
    // 1. co模块(https://github.com/tj/co) 于2013年6月发布的小工具，用于Generator函数的自动执行
    // 2. co模块是将两种自动执行器（Thunk函数和Promise对象）封装成了一个模块。
    // 3. 使用co模块，Generator函数的yield 命令后必须是Thunk函数或者Promise对象
    // 4. 使用co模块，可以不用编写Generator函数的执行器
    // 5. co函数返回一个Promise对象，因此可以使用then方法添加回调函数

    const co = require('co')
    const thunkify = require('thunkify')
    const readFile = thunkify(fs.redFile)


    const gen = function* (params) {
      let f1 = yield readFile('fileA')
      let f2 = yield readFile('fileB')
      //...
      let fn = yield readFile('fileN')
    }
    co(gen)

  </script>

</body>

</html>
